# 대망의 attendancebook



## 설계.. (진짜.. 감이 안오는게 많다.. 서버란..) 
- 어떤식으로 클라이언트에서 접근하게 되는건지? (url 을 어떤 식으로 노출시켜야 하는지)




### 전체적인 과정??

일단은 처음 페이지에서 교구선택
그러면 해당 날짜에 맞는 셀들을... 리스트에 담아서 보여줌 (arrangement를 얻어왔을 것이고 그에 맞는 팀을 읽어 왔을 것임, 모두 get 사용)
해당 팀을 선택하면 해당 날짜 + 팀 id를 가지고 출석부를 가져옴 (출석부의 id 는 특정 쿼리를 통해서, 그 이후에는 get + put을 이용해서 수정)

내가 지금 이해한 방식으로는 어떻게든 클라이언트에서 해당 출석부의 id를 알아낼 방식이 필요함 (그래야 get을 하든, put을 하든 함)
여기서 고민할 부분은 get + put 일지
1. get + put (이 경우 클라이언트에서 id 를 알아내는 작업을 진행할 때 출석부가 없으면 빈 출석부를 만들어 내는 방식)
2. get + post (이 경우에는 post를 통해서 id 를 알아냄, 그렇다면 빈 출석부의 정보를 가져오려면 어떤.. uri로 표현해야 할까?)

#### 20190225(월)
일단은 1번 방식으로 해볼까싶다  
즉 해당 출석부가 존재하면 해당 id를 가져다가 주고  
없을 경우에는 빈 출석부를 만들고 해당 id를 리턴  
이후에는 그 id로 get, put 하는 방식
(새로고침을 하게 되는 경우에도 id 는 동일하게 사용하고 저장된 출석부만 새로운 빈 출석부로 해주면 될듯)

먼가 데이터를 어떻게 나타내는 지랑 클라이언트 화면에서는 어떤 단위로 생각할지를 다르게 봐야할지도...


### 그렇다면 무엇을 구현해야 할까??
1. handler: get, put + 출석부 id를 알아낼 무언가
2. id 를 관리하는 무언가 (+ 팀 id 와 시간정보로 id 를 찾을 수 있도록)
3. id 를 사용해서 출석부를 저장하는 무언가

attendancebooks + query (모든 출석정보를 가져오도록 or query와 관련된 출석정보를)



### 출석부가 어려운 점??
일단 출석부를 생성할때 알아야 할 정보는 팀id + 생성할 때의 시간
출석부가 나타내는 정보는 팀 + eventlist

출석부 자체는 어떤 식으로 서버에서 접근이 가능할지.. 가능하게 할지.. 어떻게 서로를 유일하게 구분하게 할지

또한 새로고침이 필요함
> 이는 부득이하게 출석부를 제출하고 ...팀정보나 eventlist정보가 변경될 때를 위함?
> 이 경우 저장된 출석부를 날리고 새로운 팀 + eventlist로 빈 출석부를 만들게 됨


## 예상되는 시나리오 
1. 주일 전까지 셀에 대한 정보가 업데이트 되고 주일날 생성되어서 전송되는 경우
2. 금철 때 생성되고 주일날 추가로 출석부 완성하고 제출
3. 금철 때 생성되고 주일 전에 셀 정보가 변경, 주일날 추가해야해서 새로고침하고 다시 출석부 생성 및 제출